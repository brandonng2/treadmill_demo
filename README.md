# Distribution of Respiratory Exchange Rate (RER) by Demographics

## Intro
Dataset: https://physionet.org/content/treadmill-exercise-cardioresp/1.0.1/

This dataset "is an ensemble of the cardiorespiratory measurements acquired during 992 treadmill maximal graded exercise tests performed in the Exercise Physiology and Human Performance Lab of the University of Malaga. Heart rate, oxygen consumption, carbon dioxide generation, and pulmonary ventilation are measured on a breath-to-breath basis along with the treadmill speed during maximal effort tests. Participants are amateur and professional athletes are of ages ranging from 10 to 63 years old. The age, height, and weight of the participants are provided, as well as the temperature and humidity during the test."

## Rationale
Question: How do demographical and experimental features affect the Respiratory Exchange Rate?

### Dataset
The data originally came in two separate CSV files, one containing information about each participant and another containing information about the runs on a treadmill, which were merged on the participant ID. We chose to focus on RER because it shows the carbohydrate-to-fat burn ratio, an interesting topic for many people interested in fitness, which could give a rough understanding of their potential RER in their workouts. We calculated the RER value using the VCO2 and VO2 values in the dataset, and a cooldown column was added to indicate whether the record was measured during the run or the cooldown after the run. Then, the dataset was filtered out to only contain records with RER values between 0-1.5, as anything over 1.5 is considered to be barely possible even when intentionally hyperventilating under a clinical environment, and values under 0 are impossible.

### Design Choices
#### General Deisgn Choice
We chose histograms as our primary visual encoding because they effectively display frequency distributions, making it easy for users to identify trends and variations in RER values across different subsets of the data. The choice of filters as our interaction technique was chosen by the need for simplicity and clarity, allowing users to easily segment the data by age, sex, weight, height, speed, and environmental factors. We considered other visualizations such as scatterplots, but these alternatives either introduced too much complexity or was not efficient in visualizing the distribution. The bins of each filtering element were roughly estimated to include a similar count of records while having a clean/intuitive bounds.

#### Smaller Features
A hover tooltip was added to give simple information about each bar. A feature of the histogram colors changing based on the sex selected was also added with blue representing male and red representing female, following customs, while using turquoise for neutral. The X-axis and the number of bins were fixed in order to make the differences between distributions clear. The total count was added to show the exact number of records that are in the shown filtered histogram. Some disclaimers were added to prevent misinterpretation of the data shown. The speed filter is disabled when the cooldown is set to True cooldown was always done at 5 km/h. Transitions of bars were added. If there were less than 1000 samples after filtering, the histogram would not be shown as it would give a clunky histogram due to a large number of bins. The cutoff of 1000 samples was chosen after testing it over multiple filters.

## Development Process

This project was a group effort with the workload spread evenly among individuals. Each brainstorming, data transformation, and design ideas and choices were made as a group throughout the iterative process of creating the interactive histogram. We began with a static histogram displaying all the data using RER as the x-axis. We then added a filter for one feature to start the iterative process for the visualization. After making sure this worked, we added the rest of the features to filter the histogram by such as age, sex, weight, height, temperature, speed, and cooldown (whether or not the runner on the treadmill was at cooldown after running their max speed). We then added the x and y labels and adjusted the x-ticks to remain constant across all the filter changes. We also added transitions, so that the bars smoothly change with the change of the filters. Finally, after adding styling to make the filter dropdowns and selection a more smoother experience for the user, we added tooltips to show the information for the individual bars, such as bin range and count data. We added information for some of the features in the filters to explain what they are in the context of the experimental data we extracted. 21 people hours led to the final version of the visualization. The aspect that took the most time was making the filters for each feature in the dataset for the interactive histogram as well as debugging the D3 histogram.
